---
outline: [1, 3]
---

# 初始步骤

1. 右边详情本地设置，基础库改掉，不要灰度。

2. 更改背景色，改成白色吧。

3. 不使用 skyline 引擎。

   app.json ，删除 skyline 那一块，rederer 改成 webview，navigationStyle 改成 default。

   ```json
   {
     "window": {
       "navigationBarTextStyle": "black",
       "navigationStyle": "default"
     },
     "renderer": "webview",
     "rendererOptions": {
     },
   }  
   
   ```

   

# 项目结构

## 基本组成结构

1. pages 用来存放所有小程序的页面 
2. utils 用来存放工具性质的模块（例如：格式化时间的自定义模块）
3. app.js 小程序项目的入口文件 
4. app.json 小程序项目的全局配置文件
5. app.wxss 小程序项目的全局样式文件 
6. project.config.json 项目的配置文件 
7. sitemap.json 用来配置小程序及其页面是否允许被微信索引



## 页面的组成部分

其中，每个页面由 4 个基本文件组成，它们分别是：

1. js 文件（页面的脚本文件，存放页面的数据、事件处理函数等）
2. json 文件（当前页面的配置文件，配置窗口的外观、表现等）
3. wxml 文件（页面的模板结构文件）
4. wxss 文件（当前页面的样式表文件）



## JSON 配置文件

### JSON 配置文件的作用

JSON 是一种数据格式，在实际开发中，JSON 总是以配置文件的形式出现。小程序项目中也不例外：通过不同 的 .json 配置文件，可以对小程序项目进行不同级别的配置。

小程序项目中有 4 种 json 配置文件，分别是：

1. 项目根目录中的 app.json 配置文件 
2. 项目根目录中的 project.config.json 配置文件 
3. 项目根目录中的 sitemap.json 配置文件 
4. 每个页面文件夹中的 .json 配置文件



### app.json 文件

app.json 是当前小程序的全局配置，包括了小程序的所有页面路径、窗口外观、界面表现、底部 tab 等。 Demo 项目里边的 app.json 配置内容如下：

1. pages：用来记录当前小程序所有页面的路径。
2. window：全局定义小程序所有页面的背景色、文字颜色等。
3. style：全局定义小程序组件所使用的样式版本。
4. sitemapLocation：用来指明 sitemap.json 的位置。



###  project.config.json 文件

project.config.json 是项目配置文件，用来记录我们对小程序开发工具所做的个性化配置，例如：

1. setting 中保存了编译相关的配置。
2. projectname 中保存的是项目名称。
3. appid 中保存的是小程序的账号 ID。



###  sitemap.json 文件

微信现已开放小程序内搜索，效果类似于 PC 网页的 SEO。sitemap.json 文件用来配置小程序页面是否允许微信索引。当开发者允许微信索引时，微信会通过爬虫的形式，为小程序的页面内容建立索引。当用户的搜索关键字和页面的索引匹配成功的时候，小程序的页面将可能展示在搜索结果中。



### 页面的 .json 配置文件

小程序中的每一个页面，可以使用 .json 文件来对本页面的窗口外观进行配置，页面中的配置项会覆盖 app.json 的 window 中相同的配置项。例如：

```json
{
  "usingComponents": {
    "navigation-bar": "/components/navigation-bar/navigation-bar"
  },
  "navigationBarBackgroundColor": "#00b26a"
}
```

导航栏颜色会替代原有的白色变成绿色。



## 新建小程序页面

只需要在 app.json -> pages 中新增页面的存放路径，小程序开发者工具即可帮我们自动创建对应的页面文件。

```json
{
  "pages": [
    "pages/index/index",
    "pages/list/list"
  ],
}
```

其他啥也不用写，会自动生成页面。



## 修改项目首页

只需要调整 app.json -> pages 数组中页面路径的前后顺序，即可修改项目的首页。小程序会把排在第一位的页 面，当作项目首页进行渲染。

```json
{
  "pages": [
    "pages/list/list"
    "pages/index/index",
  ],
}
```

改成 list 为项目首页。



# WXML 模板

## 什么是 WXML

WXML（WeiXin Markup Language）是小程序框架设计的一套标签语言，用来构建小程序页面的结构，其作用类似于网页开发中的 HTML。



## WXML 和 HTML 的区别

1. 标签名称不同

   * HTML （div, span, img, a） 

   * WXML（view, text, image, navigator）

2. 属性节点不同

   * `<a href="#">超链接</a>`
   * `<navigator url="/pages/home/home"></navigator>`

3. 提供了类似于 Vue 中的模板语法

   * 数据绑定
   * 列表渲染
   * 条件渲染



# WXSS 样式

## 什么是 WXSS

WXSS (WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式，类似于网页开发中的 CSS。



## WXSS 和 CSS 的区别

1. 新增了 rpx 尺寸单位。
   * CSS 中需要手动进行像素单位换算，例如 rem。
   * WXSS 在底层支持新的尺寸单位 rpx，在不同大小的屏幕上小程序会自动进行换算。
2. 提供了全局的样式和局部样式。
   * 项目根目录中的 app.wxss 会作用于所有小程序页面。
   * 局部页面的 .wxss 样式仅对当前页面生效。
3. WXSS 仅支持部分 CSS 选择器。
   * .class 和 #id
   * element
   * 并集选择器、后代选择器
   * ::after 和 ::before 等伪类选择器



# JS 逻辑交互

## 小程序中的 .js 文件

一个项目仅仅提供界面展示是不够的，在小程序中，我们通过 .js 文件来处理用户的操作。例如：响应用户的 点击、获取用户的位置等等。



## 小程序中 .js 文件的分类

1. app.js

   是整个小程序项目的入口文件，通过调用 App() 函数来启动整个小程序。

2. 页面的 .js 文件

   是页面的入口文件，通过调用 Page() 函数来创建并运行页面。

3. 普通的 .js 文件

   是普通的功能模块文件，用来封装公共的函数或属性供页面使用。



# 宿主环境

## 什么是宿主环境

宿主环境（host environment）指的是程序运行所必须的依赖环境。例如：Android 系统和 iOS 系统是两个不同的宿主环境。安卓版的微信 App 是不能在 iOS 环境下运行的，所以，Android 是安卓软件的宿主环境，脱离了宿主环境的软件是没有任何意义的！
